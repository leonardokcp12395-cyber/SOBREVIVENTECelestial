<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sobrevivente Celestial</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
</head>
<body>
    <div id="debug-status" style="position: fixed; top: 10px; left: 10px; color: yellow; background: rgba(0,0,0,0.7); padding: 5px; border-radius: 5px; z-index: 9999;">A carregar JS...</div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>

        <div id="ui-layer" class="ui-layer">
            <div id="main-menu" class="ui-panel hidden">
                <div class="title-container">
                    <h1 data-text="Sobrevivente">Sobrevivente</h1>
                    <h1 data-text="Celestial" class="celestial-title">Celestial</h1>
                </div>
                <p>Gemas: <strong id="gem-counter">0</strong></p>
                <button id="play-button" class="ui-button">Iniciar Jogo</button>
                <button id="upgrades-button" class="ui-button">Melhorias</button>
                <button id="guide-button" class="ui-button">Como Jogar</button>
                <button id="rank-button" class="ui-button">Rank Global</button>
                <button id="fullscreen-button" class="ui-button">Ecrã Inteiro</button>
            </div>

            <div id="pause-menu" class="ui-panel hidden">
                <h2>Jogo Pausado</h2>
                <button id="resume-button" class="ui-button">Continuar</button>
                <button id="restart-button-pause" class="ui-button">Reiniciar</button>
                <button id="back-to-menu-button-pause" class="ui-button">Menu Principal</button>
            </div>

            <div id="game-over-screen" class="ui-panel hidden">
                <h2>Fim de Jogo</h2>
                <p>Tempo de Sobrevivência: <strong id="final-time">00:00</strong></p>
                <p>Inimigos Derrotados: <strong id="final-kills">0</strong></p>
                <button id="restart-button-gameover" class="ui-button">Tentar Novamente</button>
                <button id="back-to-menu-button-gameover" class="ui-button">Menu Principal</button>
            </div>

            <div id="level-up-screen" class="ui-panel hidden">
                <h2>Subiu de Nível!</h2>
                <p>Escolha uma Melhoria:</p>
                <div id="skill-options"></div>
            </div>

            <div id="guide-screen" class="ui-panel hidden">
                <h2>Como Jogar</h2>
                <p><strong>Objetivo:</strong> Sobreviva o máximo de tempo possível contra hordas de inimigos.</p>
                <p><strong>Controlos PC:</strong> Use <strong>WASD</strong> ou <strong>Setas</strong> para mover. <strong>Espaço</strong> ou <strong>Seta Cima</strong> para saltar. <strong>Shift</strong> para dash.</p>
                <p><strong>Controlos Telemóvel:</strong> Use o joystick (toque e arraste em qualquer lugar do ecrã) para mover e saltar (arraste para cima). Use o botão de <strong>Dash</strong> no canto inferior direito.</p>
                <p><strong>Progresso:</strong> Derrote inimigos para ganhar XP e subir de nível. Ao subir de nível, escolha novas habilidades ou aprimore as existentes.</p>
                <p><strong>Habilidades:</strong> Os seus ataques são automáticos e focam no inimigo mais próximo.</p>
                <button id="back-from-guide-button" class="ui-button">Voltar</button>
            </div>

            <div id="rank-screen" class="ui-panel hidden">
                <h2>Classificação Global</h2>
                <h3>Melhor Tempo de Sobrevivência</h3>
                <p id="rank-time">00:00</p>
                <h3>Total de Inimigos Derrotados</h3>
                <p id="rank-total-kills">0</p>
                <button id="back-from-rank-button" class="ui-button">Voltar</button>
            </div>

            <div id="upgrades-menu" class="ui-panel hidden">
                <h2>Melhorias Permanentes</h2>
                <p>Gemas: <strong id="gem-counter-upgrades">0</strong></p>
                <div id="upgrades-options"></div>
                <button id="back-from-upgrades-button" class="ui-button">Voltar</button>
            </div>
        </div>

        <div id="hud" class="hidden">
            <div id="top-hud">
                <div id="stats-bars">
                    <div id="health-bar-container"><div id="health-bar"></div></div>
                    <div id="xp-bar-container"><div id="xp-bar"></div></div>
                </div>
                <button id="pause-button" class="ui-button">II</button>
            </div>
            <div id="timer">00:00</div>
            <div id="skills-hud"></div>
        </div>
        <button id="dash-button-mobile" class="ui-button hidden">»</button>
    </div>

    <div id="temporary-message" class=""></div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
